# Ansible Vagrant Environment

A complete Ansible testing environment using Vagrant and VirtualBox. Creates one control node and multiple managed nodes with automated SSH key setup for passwordless authentication.

## Overview

- **Vagrantfile**: Multi-VM setup with Ubuntu 24.04 (1 control + 2 managed nodes)
- **bootstrap-control.sh**: Ansible installation and configuration script
- **Dynamic SSH keys**: Ed25519 keys automatically distributed to all nodes
- **Auto-generated configs**: Ansible inventory and configuration files
- **Version control**: Configurable Ansible version installation
- **Dual installation support**: Install either Ansible community package or ansible-core directly

## Requirements

- **Vagrant** 2.0+ (tested on 2.4.2)
- **VirtualBox** 6.0+ (tested on 7.1.7)
- **Host system**: macOS or Windows
- **RAM**: 2GB+ available (1GB per VM)
- **Disk space**: 5GB+ free

## Ansible Directory

This directory contains Ansible configuration and inventory files that are **automatically generated** by the Vagrantfile during VM provisioning.

## Generated Files (Do Not Edit Manually)

- `ansible.cfg` - Ansible configuration (generated by Vagrantfile)
- `inventory` - Dynamic inventory with managed nodes (generated by Vagrantfile)

## Manual Files (You Can Add These)

- `playbooks/` - Put your Ansible playbooks here
- `roles/` - Put your Ansible roles here
- `group_vars/` - Group variable files
- `host_vars/` - Host-specific variable files

## How It Works

1. Run `vagrant up` to start all VMs
2. The Vagrantfile automatically generates `ansible.cfg` and `inventory`
3. SSH into the control node: `vagrant ssh ansible-control`
4. Navigate to ansible directory: `cd ansible`
5. Test connectivity: `ansible all -m ping`
6. Run your playbooks: `ansible-playbook your-playbook.yml`

## Configuration Source

The real configuration lives in the `Vagrantfile`. To modify Ansible settings:

1. Edit the Vagrantfile
2. Run `vagrant provision ansible-control` to regenerate the config files

## Configuration

You can customize the environment by editing variables in the `Vagrantfile`, for an example:

```ruby
# Number of managed nodes (default: 1)
NUM_MANAGED_NODES = 2

# Ansible version to install
ANSIBLE_VERSION = "latest"        # Latest community package
ANSIBLE_VERSION = "11.2"          # Community package 11.2
ANSIBLE_VERSION = "9.8"           # Community package 9.8
ANSIBLE_VERSION = "core-2.17.5"   # ansible-core 2.17.5
ANSIBLE_VERSION = "core-2.16.14"  # ansible-core 2.16.14
```

**Version Options:**

- **Community Package**: `"latest"`, `"11.2"`, `"9.8"` (includes collections)
- **ansible-core**: `"core-2.17.5"`, `"core-2.16.14"` (minimal engine only)
